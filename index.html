<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Network Manager UI</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 10px;
      display: flex;
    }

    /* Layout: 2 colonne */
    .left, .right {
      width: 50%;
      padding: 10px;
      box-sizing: border-box;
    }

    .left {
      border-right: 1px solid #ccc;
    }

    section {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 10px;
      background-color: #f9f9f9;
    }

    h2, h4 {
      margin: 4px 0;
    }

    .input-group {
      margin: 6px 0;
    }

    input[type="text"] {
      padding: 4px;
      width: 250px;
    }

    textarea {
      width: 100%;
      height: 60px;
      font-family: monospace;
      font-size: 12px;
    }

    button {
      padding: 4px 8px;
      margin-left: 5px;
    }

    #responseArea {
      white-space: pre-wrap;
      background-color: #eef;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      height: 95vh;
      overflow-y: auto;
    }
  </style>
</head>
<body>

  <!-- COLONNA SINISTRA -->
  <div class="left">

    <!-- Network Profiles -->
    <section>
      <h2>Network Profiles</h2>
      <div class="input-group">
        <button onclick="handleRequest('GET', '/networkprofiles')">GET /networkprofiles</button>
      </div>
      <div class="input-group">
        <label>ID: <input type="text" id="profileId"></label>
        <button onclick="handleRequest('GET', '/networkprofiles/' + profileId.value)">GET /networkprofiles/{id}</button>
      </div>
    </section>

    <!-- Networks -->
    <section>
      <h2>Networks</h2>
      <div class="input-group">
        <button onclick="handleRequest('GET', '/networks')">GET /networks</button>
      </div>
      <div class="input-group">
        <label>ID: <input type="text" id="networkId"></label>
        <button onclick="handleRequest('GET', '/networks/' + networkId.value)">GET /networks/{id}</button>
      </div>
      <div class="input-group">
        <label>Delete ID: <input type="text" id="networkIdDelete"></label>
        <button onclick="handleRequest('DELETE', '/networks/' + networkIdDelete.value)">DELETE /networks/{id}</button>
      </div>
      <div class="input-group">
        <h4>POST /networks</h4>
        <textarea id="postNetworkBody">{}</textarea><br>
        <button onclick="handleRequest('POST', '/networks', postNetworkBody.value)">Invia POST</button>
      </div>
    </section>

    <!-- Network Accesses -->
    <section>
      <h2>Network Accesses</h2>
      <div class="input-group">
        <button onclick="handleRequest('GET', '/networkAccesses')">GET /networkAccesses</button>
      </div>
      <div class="input-group">
        <label>ID: <input type="text" id="accessId"></label>
        <button onclick="handleRequest('GET', '/networkAccesses/' + accessId.value)">GET /networkAccesses/{id}</button>
      </div>
      <div class="input-group">
        <label>Delete ID: <input type="text" id="accessIdDelete"></label>
        <button onclick="handleRequest('DELETE', '/networkAccesses/' + accessIdDelete.value)">DELETE /networkAccesses/{id}</button>
      </div>
      <div class="input-group">
        <h4>POST /networkAccesses</h4>
        <textarea id="postAccessBody">{}</textarea><br>
        <button onclick="handleRequest('POST', '/networkAccesses', postAccessBody.value)">Invia POST</button>
      </div>
    </section>

  </div>

  <!-- COLONNA DESTRA -->
  <div class="right">
    <h2>Risposta server</h2>
    <div id="responseArea">Clicca unâ€™azione per vedere la risposta qui.</div>
  </div>

  <script>
    async function handleRequest(method, endpoint, body = null) {
      let baseUrl = '';
  
      if (endpoint.startsWith('/networks')) {
        baseUrl = 'https://camara-dedicated-network.onrender.com/dedicated-network/vwip';
      } else if (endpoint.startsWith('/networkAccesses')) {
        baseUrl = 'https://camara-dedicated-network.onrender.com/dedicated-network-accesses';
      } else if (endpoint.startsWith('/networkprofiles')) {
        baseUrl = 'https://camara-dedicated-network.onrender.com/dedicated-network-profiles';
      } else {
        document.getElementById('responseArea').textContent = 'Errore: endpoint non riconosciuto';
        return;
      }
  
      try {
        const response = await fetch(baseUrl + endpoint, {
          method: method,
          headers: {
            'Content-Type': 'application/json'
          },
          body: method !== 'GET' && method !== 'HEAD' ? body : null
        });
  
        const resultText = await response.text();
  
        // Prova a fare il parse come JSON, altrimenti mostra testo grezzo
        try {
          const resultJson = JSON.parse(resultText);
          document.getElementById('responseArea').textContent = JSON.stringify(resultJson, null, 2);
        } catch {
          document.getElementById('responseArea').textContent = resultText;
        }
  
      } catch (err) {
        document.getElementById('responseArea').textContent = 'Errore nella richiesta: ' + err;
        console.error(err);
      }
    }
  </script>  

</body>
</html>